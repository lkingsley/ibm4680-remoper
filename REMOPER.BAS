STRING ARGS$
INTEGER*4 KEY.LENGTH%, RECORD.LENGTH%, IO.SESSION%
INTEGER*4 HX%, SX%, THE.SUM%, S%, ERRNCODE%
STRING ERRFX$, Z$

IO.SESSION% = 10
KEY.LENGTH% = 10
RECORD.LENGTH% = 72
ARGS$ = COMMAND$

ON ERROR GOTO ERRORTRAP

!* PARAMETER VALIDATION *!
IF LEN(ARGS$) = 0 THEN \
  BEGIN
    PRINT "OPERATOR ID REQUIRED!"
    GOTO FINISH
  ENDIF
IF LEN(ARGS$) < KEY.LENGTH% THEN \
  ARGS$ = STRING$(KEY.LENGTH% - LEN(ARGS$),"0") + ARGS$

OPEN "EAMOPERA.DAT" KEYED RECL RECORD.LENGTH% AS IO.SESSION%

DELREC IO.SESSION%;PACK$(ARGS$)
PRINT "OPERATOR DELETED SUCCESSFULLY!"
CLOSE IO.SESSION%

FINISH:
STOP

ERRORTRAP:
!* ERROR ASSEMBLY ROUTINE *!
  HX% = ERRN
  ERRFX$ = ""
  FOR S% = 28 TO 0 STEP -4
    SX% = SHIFT(HX%,S%)
    THE.SUM% = SX% AND 000FH
  IF THE.SUM% > 9 THEN    \
    THE.SUM%=THE.SUM%+55 \
  ELSE                    \
    THE.SUM%=THE.SUM%+48
    Z$=CHR$(THE.SUM%)
    ERRFX$ = ERRFX$ + Z$
  NEXT S%

  IF ERRFX$ = "80F306C8" THEN \
    BEGIN
      PRINT "RECORD DOES NOT EXIST!"
      GOTO FINISH
    ENDIF
  PRINT
  PRINT "A runtime error has occurred"
  PRINT
  PRINT "  ERR = ";ERR,"   ERRL = ";ERRL
  PRINT "  ERRF = ";ERRF%,"   ERRN = ";ERRFX$
  PRINT
  STOP
END